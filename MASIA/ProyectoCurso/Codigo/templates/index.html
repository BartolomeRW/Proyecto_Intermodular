<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Predicción IA - Producción Agrícola</title>
    <link rel="stylesheet" href="/static/css/masia.css">
</head>

<body>

    <div class="container">

        <h1>Predicción IA - Producción Agrícola</h1>
        <h3>Entrenar IA con tus datos de Masiá</h3>

        <!-- ===================== SUBIR ARCHIVO CSV/EXCEL ===================== -->
        <form action="/upload" method="POST" enctype="multipart/form-data">
            <label>Selecciona archivo (CSV o Excel):</label>
            <input type="file" name="archivo" required>

            <button type="submit">Subir y entrenar</button>
        </form>

        <hr>

        <!-- ===================== REENTRENAR IA ===================== -->
        <form action="/train" method="POST">
            <button type="submit">Reentrenar IA con datos subidos</button>
        </form>

        <hr>

        <!-- ===================== FORMULARIO DE PREDICCIÓN ===================== -->
        <h3>Realizar Predicción</h3>

        <form action="/" method="POST">

            <label>Hectáreas:</label>
            <input type="number" step="0.01" name="hectareas" required>

            <label>Temperatura media:</label>
            <input type="number" step="0.01" name="temperatura" required>

            <label>Litros de lluvia:</label>
            <input type="number" step="0.01" name="lluvia" required>

            <button type="submit">Calcular</button>
        </form>

        <hr>

        <!-- ===================== RESULTADO PREDICCIÓN ===================== -->
        {% if prediccion %}
        <h3>Resultado de la predicción:</h3>
        <p><strong>{{ prediccion }} toneladas</strong></p>
        {% endif %}

        <!-- ===================== GRÁFICO DINÁMICO ===================== -->
        {% if grafico %}
        <h3>Gráfico de Producción</h3>
        <img src="/{{ grafico }}" alt="Gráfico de producción">
        {% endif %}

    </div>

</body>

</html>
